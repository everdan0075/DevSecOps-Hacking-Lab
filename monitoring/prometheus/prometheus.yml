global:
  scrape_interval: 15s
  scrape_timeout: 10s
  evaluation_interval: 15s

rule_files:
  - /etc/prometheus/alert_rules.yml

alerting:
  alertmanagers:
    - static_configs:
        - targets:
            - "alertmanager:9093"

scrape_configs:
  - job_name: "login-api"
    honor_labels: true
    metrics_path: "/metrics"
    static_configs:
      - targets:
          - "login-api:8000"
        labels:
          service: "login-api"
          component: "vulnerable-service"
          env: "local"

  - job_name: "api-gateway"
    honor_labels: true
    metrics_path: "/metrics"
    static_configs:
      - targets:
          - "api-gateway:8080"
        labels:
          service: "api-gateway"
          component: "gateway"
          env: "local"

  - job_name: "user-service"
    honor_labels: true
    metrics_path: "/metrics"
    static_configs:
      - targets:
          - "user-service:8000"
        labels:
          service: "user-service"
          component: "vulnerable-service"
          env: "local"

  - job_name: "incident-bot"
    honor_labels: true
    metrics_path: "/metrics"
    static_configs:
      - targets:
          - "incident-bot:5002"
        labels:
          service: "incident-bot"
          component: "security-automation"
          env: "local"

  - job_name: "ids-exporter"
    honor_labels: true
    metrics_path: "/metrics"
    scrape_interval: 10s  # More frequent scraping for IDS alerts
    static_configs:
      - targets:
          - "ids-exporter:9200"
        labels:
          service: "ids-exporter"
          component: "network-security"
          env: "local"

  # Placeholder for future exporters (node, attack scripts, etc.)
  - job_name: "prometheus"
    static_configs:
      - targets:
          - "localhost:9090"

